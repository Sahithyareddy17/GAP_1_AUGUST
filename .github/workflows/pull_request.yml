 
 
name: pull_request Events
 
on:
  pull_request:
    types: [opened, synchronize, reopened, closed, assigned, labeled, edited]
  push:
    branches: [master]
  workflow_dispatch:
 
jobs:
  # ---------------- Debug info (always runs) ----------------
  debug:
    runs-on: ubuntu-latest
    steps:
      - name: Show trigger info
        run: |
          echo "ğŸ”” Event name   : ${{ github.event_name }}"
          echo "ğŸ”” Event action : ${{ github.event.action || 'N/A' }}"
          echo "ğŸ”” Base branch  : ${{ github.event.pull_request.base.ref || github.ref }}"
          echo "ğŸ”” Head branch  : ${{ github.event.pull_request.head.ref || 'N/A' }}"
          echo "ğŸ”” PR number    : ${{ github.event.number || 'N/A' }}"
 
  # ---------------- CI for PRs ----------------
  build:
    if: github.event_name == 'push' ||
        github.event.action == 'opened' ||
        github.event.action == 'synchronize' ||
        github.event.action == 'reopened'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Build
        run: echo "ğŸ—ï¸ Building project for ${{ github.event_name }} / ${{ github.event.action }}"
 
  test:
    needs: build
    if: github.event_name == 'push' ||
        github.event.action == 'opened' ||
        github.event.action == 'synchronize' ||
        github.event.action == 'reopened'
    runs-on: ubuntu-latest
    steps:
      - name: Test
        run: echo "âœ… Tests executed"
 
  # ---------------- Deploy after merge ----------------
  deploy:
    needs: [build, test]
    if: github.event_name == 'push' && github.ref == 'refs/heads/master'
    runs-on: ubuntu-latest
    steps:
      - name: Deploy
        run: echo "ğŸš€ Deploying after merge to master"
 
  # ---------------- PR info-only events ----------------
  merged:
    if: github.event_name == 'pull_request' &&
        github.event.action == 'closed' &&
        github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - run: echo "âœ… PR merged into ${{ github.event.pull_request.base.ref }}"
 
  not_merged:
    if: github.event_name == 'pull_request' &&
        github.event.action == 'closed' &&
        github.event.pull_request.merged == false
    runs-on: ubuntu-latest
    steps:
      - run: echo "âŒ PR closed without merge"
 
  assigned:
    if: github.event_name == 'pull_request' && github.event.action == 'assigned'
    runs-on: ubuntu-latest
    steps:
      - run: echo "ğŸ‘¤ Assigned to ${{ github.event.assignee.login }}"
 
  labeled:
    if: github.event_name == 'pull_request' && github.event.action == 'labeled'
    runs-on: ubuntu-latest
    steps:
      - run: echo "ğŸ·ï¸ Label '${{ github.event.label.name }}' added"
 
  edited:
    if: github.event_name == 'pull_request' && github.event.action == 'edited'
    runs-on: ubuntu-latest
    steps:
      - run: echo "ğŸ“Title now:'${{ github.event.pull_request.title }}'"
 
